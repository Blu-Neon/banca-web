<style>
  :root {
    --menu-radius: 20px;
    --menu-shadow: 0 18px 40px rgba(0,0,0,0.85);
    --menu-gold: #f4c97a;
    --menu-gold-strong: #ffd992;
    --menu-text: #f9fafb;
    --menu-soft: #a1a1aa;
  }

  /* Pulsante floating in alto a destra */
  #menu-button {
    position: fixed;
    top: 16px;
    right: 16px;
    width: 46px;
    height: 46px;

    display: inline-flex;
    align-items: center;
    justify-content: center;

    color: var(--menu-gold-strong);
    font-size: 22px;
    font-weight: 600;

    background:
      radial-gradient(circle at top,
        rgba(244, 201, 122, 0.22),
        rgba(5, 8, 21, 0.98)
      );
    border-radius: 999px;
    border: 1px solid rgba(244, 201, 122, 0.7);

    box-shadow:
      0 0 0 1px rgba(15,23,42,0.9),
      var(--menu-shadow);
    cursor: pointer;
    z-index: 9999;

    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);

    transition:
      transform 0.12s ease-out,
      box-shadow 0.12s ease-out,
      background 0.12s ease-out,
      opacity 0.12s ease-out,
      border-color 0.12s ease-out;
  }

  #menu-button:hover {
    transform: translateY(-1px);
    box-shadow:
      0 0 0 1px rgba(244, 201, 122, 0.7),
      0 20px 46px rgba(0,0,0,0.95);
    background:
      radial-gradient(circle at top,
        rgba(244, 201, 122, 0.3),
        rgba(5, 8, 21, 1)
      );
  }

  #menu-button:active {
    transform: translateY(0) scale(0.96);
    box-shadow:
      0 0 0 1px rgba(244, 201, 122, 0.6),
      0 12px 28px rgba(0,0,0,0.8);
  }

  /* Contenitore menu */
  #dropdown-menu {
    position: fixed;
    top: 70px;
    right: 16px;

    width: 230px;
    padding: 14px 12px 12px;

    background:
      radial-gradient(circle at top left,
        rgba(244, 201, 122, 0.06),
        rgba(5, 8, 21, 0.98)
      );
    border-radius: var(--menu-radius);
    border: 1px solid rgba(148,163,184,0.8);

    display: flex;
    flex-direction: column;
    gap: 8px;

    opacity: 0;
    transform: translateY(-10px) scale(0.97);
    pointer-events: none;

    box-shadow: var(--menu-shadow);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);

    transition:
      opacity 0.18s ease-out,
      transform 0.18s ease-out;
    z-index: 9998;
  }

  #dropdown-menu.open {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
  }

  /* Titolo mini in alto al menu */
  .menu-header {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.16em;
    opacity: 0.78;
    margin-bottom: 4px;
    padding: 0 4px;
    color: var(--menu-soft);
  }

  /* Bottoni di navigazione */
  .menu-btn {
    width: 100%;
    padding: 9px 10px;
    border-radius: 999px;
    font-size: 13px;
    font-weight: 500;

    border: none;
    cursor: pointer;

    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;

    color: var(--menu-text);
    background:
      radial-gradient(circle at top,
        var(--menu-gold-strong),
        var(--menu-gold)
      );
    box-shadow:
      0 0 0 1px rgba(24,24,27,0.9),
      0 12px 26px rgba(0,0,0,0.9);

    letter-spacing: 0.03em;
    text-transform: uppercase;

    transition:
      transform 0.12s ease-out,
      box-shadow 0.12s ease-out,
      filter 0.12s ease-out,
      background 0.12s ease-out;
  }

  .menu-btn:hover {
    transform: translateY(-1px);
    box-shadow:
      0 0 0 1px rgba(244, 201, 122, 0.7),
      0 16px 34px rgba(0,0,0,1);
    filter: brightness(1.03);
  }

  .menu-btn:active {
    transform: translateY(0) scale(0.97);
    box-shadow:
      0 0 0 1px rgba(244, 201, 122, 0.6),
      0 10px 22px rgba(0,0,0,0.9);
  }

  /* Variante “secondaria” visiva per qualche voce, se vuoi usarla in futuro
  .menu-btn.secondary {
    background: rgba(15,23,42,0.96);
    color: var(--menu-soft);
    box-shadow: 0 8px 20px rgba(0,0,0,0.8);
  }
  */

  .menu-btn.logout {
    background:
      radial-gradient(circle at top,
        #fed7d7,
        #f97373
      );
    color: #111827;
    box-shadow:
      0 0 0 1px rgba(24,24,27,0.95),
      0 12px 26px rgba(0,0,0,1);
  }

  .menu-btn.logout:hover {
    box-shadow:
      0 0 0 1px rgba(252,165,165,0.9),
      0 18px 36px rgba(0,0,0,1);
  }

  .menu-divider {
    height: 1px;
    margin: 6px 4px 4px;
    background: radial-gradient(circle, rgba(148,163,184,0.9), transparent);
    opacity: 0.7;
  }

  /* Anti scroll-click sotto al menu */
  body.menu-open {
    overflow-x: hidden;
  }

  @media (max-width: 480px) {
    #dropdown-menu {
      right: 12px;
      width: 215px;
    }

    #menu-button {
      right: 12px;
      top: 14px;
    }
  }
</style>

<!-- ====================== MENU UNIVERSALE ====================== -->

<!-- Pulsante menu -->
<button id="menu-button" aria-label="Apri il menu di navigazione">☰</button>

<!-- Menu contenitore -->
<div id="dropdown-menu">
  <div class="menu-header">Navigazione</div>

  <form method="GET" action="/tipo">
    <button class="menu-btn" type="submit">Home</button>
  </form>

  <form method="GET" action="/">
    <button class="menu-btn" type="submit">Spesa</button>
  </form>

  <form method="GET" action="/abbonamenti">
    <button class="menu-btn" type="submit">Abbonamenti</button>
  </form>
  
  <form method="GET" action="/update-saldo">
    <button class="menu-btn" type="submit">Aggiorna saldo</button>
  </form>

  <form method="GET" action="/grafico">
    <button class="menu-btn" type="submit">Grafico del mese</button>
  </form>

  <form method="GET" action="/tipologia">
    <button class="menu-btn" type="submit">Spese per tipologia</button>
  </form>

  <form method="GET" action="/storico">
    <button class="menu-btn" type="submit">Storico</button>
  </form>
  
  <form method="GET" action="/viaggio">
    <button class="menu-btn" type="submit">Viaggio</button>
  </form>

  <form method="GET" action="/storico_viaggi">
    <button class="menu-btn" type="submit">Storico viaggi</button>
  </form>

  <div class="menu-divider"></div>

  <form method="GET" action="/profile">
    <button class="menu-btn" type="submit">Account</button>
  </form>

  <form method="GET" action="/logout">
    <button class="menu-btn logout" type="submit">Logout</button>
  </form>
</div>

<script>
  const menuBtn = document.getElementById("menu-button");
  const drop = document.getElementById("dropdown-menu");

  function toggleMenu() {
    drop.classList.toggle("open");
    document.body.classList.toggle("menu-open", drop.classList.contains("open"));
  }

  menuBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    toggleMenu();
  });

  // Chiudi cliccando fuori dal menu
  document.addEventListener("click", (e) => {
    if (!drop.classList.contains("open")) return;

    const clickInsideMenu = drop.contains(e.target) || menuBtn.contains(e.target);
    if (!clickInsideMenu) {
      drop.classList.remove("open");
      document.body.classList.remove("menu-open");
    }
  });
</script>
