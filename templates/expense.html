<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Aggiorna saldo</title>
  </head>

  <body style="
    font-family: sans-serif;
    padding: 20px;
    max-width: 480px;
    margin: auto;

    background-image: url('https://images.unsplash.com/photo-1602292678572-16cb94ea0d88?q=80&w=430&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;

    color: white;
    text-shadow: 0 0 5px black;
  ">

  {% include "menu.html" %}


    <h1>Aggiorna saldo</h1>
    <p>Saldo attuale: <strong>{{ saldo }} â‚¬</strong></p>

    <form method="POST" action="/update-saldo"
          style="display:flex; flex-direction:column; gap:15px; margin-top:25px;">

      <input type="text"
             id="amount-input"
             name="amount"
             placeholder="Importo (es. 150,00)"
             style="padding:12px; font-size:20px; background:#F0FFF0; color:#006400; border-radius:12px; font-weight:bold;"
             required />

      <button type="submit"
              style="padding:12px; font-size:18px; background:#32CD32; color:white; border-radius:25px;">
        Aggiungi al saldo
      </button>
    </form>

    <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:40px; margin-top:50px; margin-left: 40px">
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('1')">1</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('2')">2</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('3')">3</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('4')">4</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('5')">5</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('6')">6</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('7')">7</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('8')">8</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('9')">9</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar(',')">,</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="addChar('0')">0</button>
      <button style=" background-color:#F0FFF0; width:60px; height:60px; border-radius:999px; color: black; font-size:25px; font-weight: bold" type="button" onclick="backspace()">C</button>
    </div>

    <script>
      function addChar(ch) {
        const input = document.getElementById('amount-input');
        if (ch === ',' && input.value.includes(',')) {
          return;
        }
        if (input.value === '0' && ch !== ',') {
          input.value = ch;
        } else {
          input.value = input.value + ch;
        }
      }

      function clearInput() {
        const input = document.getElementById('amount-input');
        input.value = '';
      }

      function backspace() {
        const input = document.getElementById('amount-input');
        input.value = input.value.slice(0, -1);
      }
    </script>
        
    {% if session.get('user_id') == 1 %}
    <style>
      /* cursore di default per tutta la pagina */
      * {
        cursor: url("/static/cursor.png") 0 0, default !important;
      }

      /* anche per bottoni e elementi che normalmente hanno cursore "pointer" */
      button, a, input, select, textarea, label {
        cursor: url("/static/cursor.png") 0 0, pointer !important;
      }
    </style>
    {% endif %}

  </body>
</html>
