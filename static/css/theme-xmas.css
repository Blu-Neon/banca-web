/*
  üéÑ Tema natalizio
  Si attiva quando l'elemento <html> ha class="theme-xmas".
  (vedi templates/base.html)
*/

html.theme-xmas {
  --bg: #020806;
  --bg-soft: #03110b;
  --card: #06130c;
  --card-soft: #081a11;

  /* manteniamo l'identit√† ‚Äúgold‚Äù ma pi√π calda */
  --gold: #f5d08a;
  --gold-soft: rgba(245, 208, 138, 0.18);
  --gold-strong: #ffe3a8;

  --text-main: #fbfbfd;
  --text-soft: rgba(243, 244, 246, 0.68);

  --border-soft: rgba(245, 208, 138, 0.22);
  --shadow-soft: 0 22px 55px rgba(0, 0, 0, 0.86);

  --xmas-red: #e34b4b;
  --xmas-green: #2db36a;
  --xmas-ice: rgba(224, 242, 254, 0.78);
}

html.theme-xmas body {
  background:
    radial-gradient(circle at top, rgba(45, 179, 106, 0.18) 0, #02040a 44%, #000 100%),
    radial-gradient(circle at 18% 12%, rgba(227, 75, 75, 0.10), transparent 55%),
    radial-gradient(circle at 82% 10%, rgba(245, 208, 138, 0.11), transparent 62%);
}

html.theme-xmas .app-shell {
  border-color: rgba(245, 208, 138, 0.34);
  background:
    radial-gradient(circle at top left, rgba(45, 179, 106, 0.10), rgba(15, 23, 42, 0.97));
}

/* Un po' pi√π ‚Äúfestoso‚Äù sugli aloni del contenitore */
html.theme-xmas .app-shell::before {
  inset: -45%;
  background:
    radial-gradient(circle at 0% 0%, rgba(45, 179, 106, 0.16), transparent 56%),
    radial-gradient(circle at 100% 0%, rgba(227, 75, 75, 0.14), transparent 56%),
    radial-gradient(circle at 40% 10%, rgba(245, 208, 138, 0.10), transparent 60%);
  opacity: 0.92;
  mix-blend-mode: screen;
}

/* üéÑ Lucine in alto (inserite da base.html con .xmas-lights) */
.xmas-lights {
  display: none;
}

html.theme-xmas .xmas-lights {
  display: block;
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 58px;
  pointer-events: none;
  z-index: 2;

  /* Filo + bagliori */
  background:
    /* filo */
    linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.00) 0,
      rgba(0, 0, 0, 0.00) 18px,
      rgba(245, 208, 138, 0.18) 19px,
      rgba(245, 208, 138, 0.05) 20px,
      rgba(0, 0, 0, 0.00) 21px
    ),
    /* lucine (punti) */
    radial-gradient(circle at 8% 20px, rgba(227, 75, 75, 0.95) 0 2.4px, transparent 3.4px),
    radial-gradient(circle at 18% 22px, rgba(45, 179, 106, 0.95) 0 2.4px, transparent 3.4px),
    radial-gradient(circle at 28% 19px, rgba(245, 208, 138, 0.95) 0 2.4px, transparent 3.4px),
    radial-gradient(circle at 38% 23px, rgba(224, 242, 254, 0.92) 0 2.4px, transparent 3.4px),
    radial-gradient(circle at 48% 19px, rgba(227, 75, 75, 0.95) 0 2.4px, transparent 3.4px),
    radial-gradient(circle at 58% 22px, rgba(45, 179, 106, 0.95) 0 2.4px, transparent 3.4px),
    radial-gradient(circle at 68% 20px, rgba(245, 208, 138, 0.95) 0 2.4px, transparent 3.4px),
    radial-gradient(circle at 78% 23px, rgba(224, 242, 254, 0.92) 0 2.4px, transparent 3.4px),
    radial-gradient(circle at 88% 19px, rgba(227, 75, 75, 0.95) 0 2.4px, transparent 3.4px);

  filter:
    drop-shadow(0 8px 22px rgba(0, 0, 0, 0.55))
    drop-shadow(0 0 10px rgba(245, 208, 138, 0.16));

  opacity: 0.95;
}

html.theme-xmas .xmas-lights::after {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 8% 20px, rgba(227, 75, 75, 0.22), transparent 10px),
    radial-gradient(circle at 18% 22px, rgba(45, 179, 106, 0.22), transparent 10px),
    radial-gradient(circle at 28% 19px, rgba(245, 208, 138, 0.18), transparent 10px),
    radial-gradient(circle at 38% 23px, rgba(224, 242, 254, 0.18), transparent 10px),
    radial-gradient(circle at 48% 19px, rgba(227, 75, 75, 0.20), transparent 10px),
    radial-gradient(circle at 58% 22px, rgba(45, 179, 106, 0.20), transparent 10px),
    radial-gradient(circle at 68% 20px, rgba(245, 208, 138, 0.16), transparent 10px),
    radial-gradient(circle at 78% 23px, rgba(224, 242, 254, 0.16), transparent 10px),
    radial-gradient(circle at 88% 19px, rgba(227, 75, 75, 0.20), transparent 10px);
  opacity: 0.85;
  animation: xmas-twinkle 2.4s ease-in-out infinite;
}

@keyframes xmas-twinkle {
  0%, 100% { opacity: 0.65; filter: blur(0px); }
  50% { opacity: 0.95; filter: blur(0.4px); }
}

@media (prefers-reduced-motion: reduce) {
  html.theme-xmas .xmas-lights::after { animation: none; }
}
